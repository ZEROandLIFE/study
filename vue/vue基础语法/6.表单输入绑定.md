
**表单输入绑定**
<template>
  <div>
    <!-- 文本输入 -->
    <input v-model="text" placeholder="输入文本">
    <p>输入的内容: {{ text }}</p>
    
    <!-- 多行文本 -->
    <textarea v-model="message"></textarea>
    
    <!-- 复选框 -->
    <input type="checkbox" v-model="checked">
    <label>是否选中: {{ checked }}</label>
    
    <!-- 单选按钮 -->
    <input type="radio" value="男" v-model="gender"> 男
    <input type="radio" value="女" v-model="gender"> 女
    <p>选择的性别: {{ gender }}</p>
    
    <!-- 下拉选择 -->
    <select v-model="selected">
      <option disabled value="">请选择</option>
      <option value="A">选项A</option>
      <option value="B">选项B</option>
    </select>
    <p>选择的值: {{ selected }}</p>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const text = ref('')
const message = ref('')
const checked = ref(false)
const gender = ref('男')
const selected = ref('')
</script>
一、v-model 基础用法
v-model 是 Vue 提供的语法糖，本质上是 value + @input 事件的简写（不同输入类型略有差异）。

1. 文本输入（<input type="text">）
html
<input v-model="text" placeholder="输入文本">
<p>输入的内容: {{ text }}</p>
ts
const text = ref('') // 初始值为空字符串
说明：

用户输入时，text 的值会自动更新。
等价于：
html
<input 
  :value="text" 
  @input="text = $event.target.value"
>
2. 多行文本（<textarea>）
html
<textarea v-model="message"></textarea>
<p>输入的内容: {{ message }}</p>
ts
const message = ref('') // 初始值为空字符串
说明：

与 <input> 行为一致，支持多行文本绑定。
二、复选框（<input type="checkbox">）
1. 单个复选框（绑定布尔值）
html
<input type="checkbox" v-model="checked">
<label>是否选中: {{ checked }}</label>
ts
const checked = ref(false) // 初始值为 false
说明：

选中时 checked 为 true，未选中时为 false。
2. 多个复选框（绑定数组）
html
<input type="checkbox" value="苹果" v-model="fruits">
<input type="checkbox" value="香蕉" v-model="fruits">
<input type="checkbox" value="橙子" v-model="fruits">
<p>选择的水果: {{ fruits }}</p>
ts
const fruits = ref<string[]>([]) // 初始值为空数组
说明：

选中的 value 会被添加到数组中，取消选中则移除。
三、单选按钮（<input type="radio">）
html
<input type="radio" value="男" v-model="gender"> 男
<input type="radio" value="女" v-model="gender"> 女
<p>选择的性别: {{ gender }}</p>
ts
const gender = ref('男') // 初始值为 "男"
说明：

选中的单选框的 value 会赋值给 gender。
四、下拉选择（<select>）
1. 单选下拉框
html
<select v-model="selected">
  <option disabled value="">请选择</option>
  <option value="A">选项A</option>
  <option value="B">选项B</option>
</select>
<p>选择的值: {{ selected }}</p>
ts
const selected = ref('') // 初始值为空字符串
说明：

选中的 option 的 value 会赋值给 selected。
disabled 的 option 用于占位提示。
2. 多选下拉框（绑定数组）
html
<select v-model="multiSelected" multiple>
  <option value="A">选项A</option>
  <option value="B">选项B</option>
  <option value="C">选项C</option>
</select>
<p>选择的值: {{ multiSelected }}</p>
ts
const multiSelected = ref<string[]>([]) // 初始值为空数组
说明：

按住 Ctrl（Windows）或 Command（Mac）可多选。
选中的多个 value 会存入数组。
五、v-model 修饰符
Vue 提供了一些修饰符来简化常见需求：

1. .lazy
默认情况下，v-model 在 input 事件后同步数据（实时更新）。使用 .lazy 改为在 change 事件后同步（失焦后更新）：

html
<input v-model.lazy="text">
适用场景：优化性能，避免频繁更新。

2. .number
自动将输入值转为 Number 类型（否则默认是 String）：

html
<input v-model.number="age" type="number">
ts
const age = ref<number>(0) // 确保类型为 number
说明：

如果输入的不是有效数字，会返回原始值（如空字符串 ""）。
3. .trim
自动去除输入的首尾空格：

html
<input v-model.trim="username">
适用场景：用户名、邮箱等需要去除空格的场景。

六、自定义组件的 v-model
v-model 也可以在自定义组件中使用，默认绑定 modelValue prop 和 update:modelValue 事件：

1. 父组件
html
<CustomInput v-model="text" />
ts
const text = ref('')
2. 子组件（CustomInput.vue）
html
<template>
  <input 
    :value="modelValue" 
    @input="$emit('update:modelValue', $event.target.value)"
  >
</template>

<script setup lang="ts">
defineProps<{ modelValue: string }>()
defineEmits<{ (e: 'update:modelValue', value: string): void }>()
</script>
说明：

父组件的 v-model="text" 等价于：
html
<CustomInput 
  :modelValue="text" 
  @update:modelValue="text = $event"
/>
3. 自定义参数（Vue 3）
Vue 3 支持多个 v-model 绑定：

html
<CustomInput v-model:title="title" v-model:content="content" />
ts
const title = ref('')
const content = ref('')
子组件：

html
<template>
  <input :value="title" @input="$emit('update:title', $event.target.value)">
  <textarea :value="content" @input="$emit('update:content', $event.target.value)"></textarea>
</template>

<script setup lang="ts">
defineProps<{ title: string; content: string }>()
defineEmits<{
  (e: 'update:title', value: string): void
  (e: 'update:content', value: string): void
}>()
</script>
七、最佳实践
始终初始化 ref 的默认值
ts
const text = ref('') // 文本初始化为空字符串
const checked = ref(false) // 复选框初始化为 false
const selected = ref('A') // 下拉框初始化为默认选项
合理使用修饰符
用 .trim 处理用户名输入。
用 .number 确保数字输入类型正确。
用 .lazy 优化频繁触发的输入（如搜索框）。
复杂表单用 reactive
如果表单字段较多，可以用 reactive 集中管理：
ts
const form = reactive({
  username: '',
  password: '',
  remember: false
})
模板中：

html
<input v-model="form.username">
<input v-model="form.password" type="password">
<input v-model="form.remember" type="checkbox">
自定义组件 v-model 明确类型
在 TypeScript 中，为自定义组件的 v-model 定义明确的类型：
ts
defineProps<{ modelValue: string }>()
defineEmits<{ (e: 'update:modelValue', value: string): void }>()
八、总结
输入类型	语法	数据类型	示例
文本输入	<input v-model="text">	string	const text = ref('')
多行文本	<textarea v-model="msg">	string	const msg = ref('')
单个复选框	<input type="checkbox" v-model="checked">	boolean	const checked = ref(false)
多个复选框	<input type="checkbox" v-model="fruits">	Array	const fruits = ref<string[]>([])
单选按钮	<input type="radio" v-model="gender">	string	const gender = ref('男')
下拉选择	<select v-model="selected">	string 或 Array	const selected = ref('')
多选下拉框	<select v-model="multiSelected" multiple>	Array	const multiSelected = ref<string[]>([])
核心要点
v-model 是双向绑定的语法糖，本质是 value + @input 事件的组合。
不同输入类型对应不同的数据类型（如复选框绑定布尔值或数组）。
修饰符（.lazy、.number、.trim）可以优化输入行为。
自定义组件可以通过 modelValue 和 update:modelValue 实现 v-model。

defineProps	声明子组件接收的 props（父组件传递的数据）。
defineEmits	声明子组件可能触发的事件（用于通知父组件）。
$emit('update:xxx', value)	触发事件，通知父组件更新 xxx 数据。
v-model:xxx	父组件监听 update:xxx 事件并更新数据的语法糖。
