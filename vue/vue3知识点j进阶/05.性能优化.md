#  AIç”Ÿæˆï¼Œå°šæœªå­¦ä¼š
Vue æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œæˆ‘ä» **ç¼–è¯‘æ—¶ã€è¿è¡Œæ—¶ã€ç½‘ç»œã€æ¸²æŸ“** ç­‰å¤šä¸ªç»´åº¦ä¸ºä½ æ•´ç†å®Œæ•´æ–¹æ¡ˆï¼š

## ğŸ“Š **ä¸€ã€æ€§èƒ½ç›‘æ§ä¸æµ‹é‡ï¼ˆå…ˆæµ‹é‡å†ä¼˜åŒ–ï¼‰**

### 1. **Vue ä¸“ç”¨å·¥å…·**
```javascript
// Vue DevTools æ€§èƒ½é¢æ¿
// æŸ¥çœ‹ç»„ä»¶æ¸²æŸ“æ—¶é—´ã€æ›´æ–°æ—¶é—´

// ç”Ÿäº§ç¯å¢ƒç›‘æ§
import { getCurrentInstance } from 'vue'

// ç»„ä»¶æ¸²æŸ“è€—æ—¶
const start = performance.now()
// ... ç»„ä»¶æ¸²æŸ“
const end = performance.now()
console.log(`ç»„ä»¶æ¸²æŸ“è€—æ—¶: ${end - start}ms`)
```

### 2. **æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡**
```javascript
// Lighthouse é‡ç‚¹å…³æ³¨
- FCP (First Contentful Paint)
- LCP (Largest Contentful Paint) 
- CLS (Cumulative Layout Shift)
- INP (Interaction to Next Paint)

// Vue ç‰¹å®šæŒ‡æ ‡
- ç»„ä»¶åˆå§‹æ¸²æŸ“æ—¶é—´
- æ›´æ–°æ¸²æŸ“æ—¶é—´
- è™šæ‹Ÿ DOM æ“ä½œæ¬¡æ•°
```

## âš¡ **äºŒã€ç¼–è¯‘æ—¶ä¼˜åŒ–ï¼ˆBuild Timeï¼‰**

### 1. **æ‰“åŒ…ä¼˜åŒ–é…ç½®**
```javascript
// vite.config.js / vue.config.js
export default {
  build: {
    // 1. ä»£ç åˆ†å‰²
    rollupOptions: {
      output: {
        manualChunks: {
          'vue-vendor': ['vue', 'vue-router', 'pinia'],
          'ui-library': ['element-plus', 'vant'],
          'utils': ['lodash-es', 'dayjs', 'axios']
        }
      }
    },
    
    // 2. å‹ç¼©ä¼˜åŒ–
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,    // ç”Ÿäº§ç¯å¢ƒç§»é™¤console
        drop_debugger: true
      }
    },
    
    // 3. èµ„æºå‹ç¼©
    assetsInlineLimit: 4096,   // 4kbä»¥ä¸‹base64å†…è”
    
    // 4. CSS ä¼˜åŒ–
    cssCodeSplit: true,        // CSSä»£ç åˆ†å‰²
    cssMinify: true
  }
}
```

### 2. **Tree Shaking ä¼˜åŒ–**
```javascript
// æŒ‰éœ€å¯¼å…¥ UI åº“
import { Button, Table } from 'element-plus'
// è€Œä¸æ˜¯ import ElementPlus from 'element-plus'

// ä½¿ç”¨æ”¯æŒ Tree Shaking çš„åº“
import { debounce } from 'lodash-es'  // è€Œä¸æ˜¯ lodash
```

### 3. **é¢„ç¼–è¯‘æ¨¡æ¿**
```vue
<!-- ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ .vue æ–‡ä»¶ -->
<!-- Vue ä¼šåœ¨æ„å»ºæ—¶é¢„ç¼–è¯‘æ¨¡æ¿ï¼Œæ€§èƒ½ä¼˜äºè¿è¡Œæ—¶ç¼–è¯‘ -->
```

## ğŸ—ï¸ **ä¸‰ã€è¿è¡Œæ—¶ä¼˜åŒ–ï¼ˆRuntimeï¼‰**

### 1. **ç»„ä»¶ä¼˜åŒ–**
```vue
<template>
  <!-- 1. v-once é™æ€å†…å®¹ -->
  <header v-once>{{ siteTitle }}</header>
  
  <!-- 2. v-memo æ¡ä»¶ç¼“å­˜ -->
  <div v-for="item in list" :key="item.id" v-memo="[item.id]">
    {{ item.name }}
  </div>
</template>

<script setup>
import { shallowRef, markRaw } from 'vue'

// 3. ä½¿ç”¨ shallowRef å‡å°‘å“åº”å¼å¼€é”€
const largeObject = shallowRef({ /* å¤§æ•°æ®å¯¹è±¡ */ })

// 4. éå“åº”å¼æ•°æ®
const config = markRaw({
  apiUrl: '...',
  timeout: 5000
})

// 5. ç»„ä»¶æ‡’åŠ è½½
const HeavyComponent = defineAsyncComponent(() =>
  import('./HeavyComponent.vue')
)

// 6. å‡½æ•°æå–åˆ°å¤–éƒ¨ï¼Œé¿å…é‡å¤åˆ›å»º
const formatDate = (date) => { /* ... */ }
</script>
```

### 2. **åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–**
```vue
<template>
  <!-- è™šæ‹Ÿæ»šåŠ¨ - å¤§æ•°æ®åˆ—è¡¨ -->
  <VirtualList :items="largeList" :item-size="50">
    <template #default="{ item }">
      <ListItem :item="item" />
    </template>
  </VirtualList>
  
  <!-- ä½¿ç”¨ keyï¼Œé¿å…ä½¿ç”¨ index -->
  <div v-for="item in items" :key="item.id">
    {{ item.name }}
  </div>
</template>

<script setup>
// ä½¿ç”¨è®¡ç®—å±æ€§è¿‡æ»¤/æ’åºï¼Œé¿å…æ¨¡æ¿ä¸­å¤æ‚è¿ç®—
const filteredList = computed(() => 
  items.value.filter(item => item.active)
)
</script>
```

### 3. **è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨ä¼˜åŒ–**
```javascript
import { computed, watch } from 'vue'

// 1. åˆç†ä½¿ç”¨ computed
const fullName = computed(() => `${firstName.value} ${lastName.value}`)

// 2. é¿å…æ·±å±‚è®¡ç®—
const expensiveResult = computed(() => {
  // å¤æ‚è®¡ç®—è€ƒè™‘ç¼“å­˜æˆ– Web Worker
  return heavyCalculation()
})

// 3. watch ä¼˜åŒ–
watch(
  () => user.value.id,  // åªç›‘å¬éœ€è¦çš„å±æ€§
  (newId) => { /* å¤„ç† */ },
  { immediate: true }
)

// 4. watchEffect è°¨æ…ä½¿ç”¨ï¼ˆè‡ªåŠ¨ä¾èµ–æ”¶é›†ï¼Œå¯èƒ½è¿‡åº¦è§¦å‘ï¼‰
watchEffect(() => {
  // è¿™é‡Œçš„ä¾èµ–ä¼šè¢«è‡ªåŠ¨æ”¶é›†
  if (user.value.active) {
    fetchData(user.value.id)
  }
})
```

### 4. **äº‹ä»¶å¤„ç†ä¼˜åŒ–**
```vue
<template>
  <!-- 1. äº‹ä»¶èŠ‚æµé˜²æŠ– -->
  <input @input="handleInput" />
  
  <!-- 2. é¿å…å†…è”äº‹ä»¶å¤„ç†å™¨ -->
  <!-- ä¸å¥½: <button @click="count++">Click</button> -->
  <!-- å¥½: <button @click="handleClick">Click</button> -->
  
  <!-- 3. äº‹ä»¶å§”æ‰˜ -->
  <div @click="handleItemClick">
    <div v-for="item in items" :data-id="item.id">
      {{ item.name }}
    </div>
  </div>
</template>

<script setup>
import { debounce } from 'lodash-es'

// å‡½æ•°å¤ç”¨ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å‡½æ•°
const handleInput = debounce((event) => {
  search(event.target.value)
}, 300)
</script>
```

## ğŸŒ **å››ã€ç½‘ç»œä¸åŠ è½½ä¼˜åŒ–**

### 1. **è·¯ç”±æ‡’åŠ è½½**
```javascript
// router.js
const routes = [
  {
    path: '/dashboard',
    component: () => import(/* webpackChunkName: "dashboard" */ './Dashboard.vue'),
    // æˆ–ä½¿ç”¨ Vite çš„ glob å¯¼å…¥
    // component: () => import('./views/**/Dashboard.vue')
  }
]
```

### 2. **èµ„æºåŠ è½½ç­–ç•¥**
```vue
<template>
  <!-- å›¾ç‰‡æ‡’åŠ è½½ -->
  <img v-lazy="imageUrl" alt="..." />
  
  <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
  <link rel="preload" :href="criticalFont" as="font" />
  
  <!-- é¢„è¿æ¥é‡è¦åŸŸå -->
  <link rel="preconnect" href="https://api.example.com" />
</template>

<script setup>
// åŠ¨æ€å¯¼å…¥ - æŒ‰éœ€åŠ è½½
const loadHeavyLibrary = async () => {
  const library = await import('heavy-library')
  return library
}

// é¢„åŠ è½½éå…³é”®èµ„æº
const preloadResources = () => {
  const link = document.createElement('link')
  link.rel = 'preload'
  link.href = '/non-critical.js'
  link.as = 'script'
  document.head.appendChild(link)
}
</script>
```

### 3. **API è¯·æ±‚ä¼˜åŒ–**
```javascript
// 1. è¯·æ±‚åˆå¹¶
import { useRequest } from 'vue-request'  // æˆ–è‡ªå·±å®ç°

// 2. ç¼“å­˜ç­–ç•¥
const cache = new Map()
const fetchWithCache = async (key, fetcher) => {
  if (cache.has(key)) return cache.get(key)
  const data = await fetcher()
  cache.set(key, data)
  return data
}

// 3. åˆ†é¡µ/è™šæ‹Ÿæ»šåŠ¨
const loadMore = async () => {
  const page = currentPage.value + 1
  const newData = await api.getList({ page, size: 20 })
  list.value.push(...newData)
}
```

## ğŸ¨ **äº”ã€æ¸²æŸ“ä¼˜åŒ–**

### 1. **CSS ä¸æ ·å¼ä¼˜åŒ–**
```vue
<template>
  <!-- 1. å‡å°‘æ ·å¼èŒƒå›´ -->
  <style scoped>  <!-- ä½¿ç”¨ scoped æˆ– CSS Modules -->
  .container {
    /* æ ·å¼ */
  }
  </style>
  
  <!-- 2. é¿å…æ·±å±‚é€‰æ‹©å™¨ -->
  <style>
  /* ä¸å¥½: .parent .child .grandchild { ... } */
  /* å¥½: .specific-class { ... } */
  </style>
</template>

<script setup>
// 3. åŠ¨æ€ç±»åä¼˜åŒ–
const buttonClass = computed(() => ({
  'btn': true,
  'btn-primary': props.primary,
  'btn-large': props.size === 'large'
}))
</script>
```

### 2. **åŠ¨ç”»ä¼˜åŒ–**
```vue
<template>
  <!-- ä½¿ç”¨ transform å’Œ opacityï¼ˆGPUåŠ é€Ÿï¼‰ -->
  <div :class="{ 'slide-in': show }">å†…å®¹</div>
</template>

<style>
.slide-in {
  transform: translateX(0);
  opacity: 1;
  transition: transform 0.3s ease, opacity 0.3s ease;
  will-change: transform, opacity;  /* æç¤ºæµè§ˆå™¨ */
}

/* ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–è¿ç»­åŠ¨ç”» */
</style>
```

### 3. **DOM æ“ä½œä¼˜åŒ–**
```javascript
// 1. æ‰¹é‡æ›´æ–°
import { nextTick } from 'vue'

const updateBatch = async () => {
  // å¤šä¸ªæ•°æ®å˜æ›´åœ¨ä¸€æ¬¡æ›´æ–°ä¸­
  data1.value = newData1
  data2.value = newData2
  await nextTick()  // ç­‰å¾…ä¸€æ¬¡æ›´æ–°å‘¨æœŸ
  // æ“ä½œ DOM
}

// 2. ä½¿ç”¨ DocumentFragment
const updateList = (items) => {
  const fragment = document.createDocumentFragment()
  items.forEach(item => {
    const el = createItemElement(item)
    fragment.appendChild(el)
  })
  listContainer.appendChild(fragment)
}
```

## ğŸ§© **å…­ã€Vue 3 ç‰¹æ€§ä¼˜åŒ–**

### 1. **Composition API ä¼˜åŒ–**
```javascript
import { ref, computed, watchEffect, onUnmounted } from 'vue'

// 1. é€»è¾‘å¤ç”¨ - è‡ªå®šä¹‰ç»„åˆå¼å‡½æ•°
export function usePagination(api) {
  const list = ref([])
  const loading = ref(false)
  
  const fetchData = async () => {
    loading.value = true
    list.value = await api.fetch()
    loading.value = false
  }
  
  return { list, loading, fetchData }
}

// 2. å‡å°‘å“åº”å¼ä¾èµ–
const nonReactiveData = { config: 'value' }  // æ™®é€šå¯¹è±¡
```

### 2. **Teleport ä¼˜åŒ–æ¨¡æ€æ¡†**
```vue
<template>
  <!-- å°†æ¨¡æ€æ¡†æ¸²æŸ“åˆ° bodyï¼Œé¿å…å±‚çº§é—®é¢˜ -->
  <Teleport to="body">
    <Modal v-if="showModal" />
  </Teleport>
</template>
```

### 3. **Suspense å¼‚æ­¥ç»„ä»¶**
```vue
<template>
  <Suspense>
    <template #default>
      <AsyncComponent />
    </template>
    <template #fallback>
      <LoadingSpinner />
    </template>
  </Suspense>
</template>
```

## ğŸ› ï¸ **ä¸ƒã€å·¥å…·ä¸è‡ªåŠ¨åŒ–**

### 1. **æ€§èƒ½æ£€æµ‹æ’ä»¶**
```javascript
// 1. Vue Performance Devtool
// https://github.com/vue-perf-devtool/vue-perf-devtool

// 2. è‡ªå®šä¹‰æ€§èƒ½ç›‘æ§
const measurePerformance = (componentName, fn) => {
  const start = performance.now()
  const result = fn()
  const end = performance.now()
  console.log(`${componentName} è€—æ—¶: ${end - start}ms`)
  return result
}
```

### 2. **æ„å»ºåˆ†æå·¥å…·**
```bash
# 1. æ‰“åŒ…åˆ†æ
npm run build -- --report
# æˆ–ä½¿ç”¨ vite-bundle-visualizer

# 2. å®‰è£…åˆ†ææ’ä»¶
npm install rollup-plugin-visualizer
```

```javascript
// vite.config.js
import { visualizer } from 'rollup-plugin-visualizer'

export default {
  plugins: [visualizer()]
}
```

### 3. **è‡ªåŠ¨åŒ–æ€§èƒ½æµ‹è¯•**
```javascript
// ä½¿ç”¨ Lighthouse CI
// https://github.com/GoogleChrome/lighthouse-ci

// åœ¨ CI/CD ä¸­é›†æˆ
"scripts": {
  "test:perf": "lhci autorun"
}
```

## ğŸ“ˆ **å…«ã€æ¸è¿›å¼ä¼˜åŒ–ç­–ç•¥**

### **ä¼˜åŒ–ä¼˜å…ˆçº§æ’åº**
1. **é«˜ä¼˜å…ˆçº§ï¼ˆå½±å“æ ¸å¿ƒä½“éªŒï¼‰**
   - é¦–å±åŠ è½½æ—¶é—´
   - å…³é”®äº¤äº’å“åº”æ—¶é—´
   - å†…å­˜æ³„æ¼é—®é¢˜

2. **ä¸­ä¼˜å…ˆçº§**
   - åˆ—è¡¨æ»šåŠ¨æ€§èƒ½
   - å›¾ç‰‡/èµ„æºåŠ è½½
   - é‡å¤æ¸²æŸ“é—®é¢˜

3. **ä½ä¼˜å…ˆçº§**
   - å¾®äº¤äº’åŠ¨ç”»
   - é¢„åŠ è½½ç­–ç•¥
   - ç¼“å­˜ä¼˜åŒ–

### **ä¼˜åŒ–æ£€æŸ¥æ¸…å•**
```markdown
âœ… ä»£ç åˆ†å‰²é…ç½®
âœ… å›¾ç‰‡æ‡’åŠ è½½
âœ… ç»„ä»¶æ‡’åŠ è½½
âœ… è·¯ç”±æ‡’åŠ è½½
âœ… è™šæ‹Ÿæ»šåŠ¨å¤§æ•°æ®åˆ—è¡¨
âœ… é˜²æŠ–èŠ‚æµäº‹ä»¶å¤„ç†
âœ… é¿å… v-if å’Œ v-for ä¸€èµ·ä½¿ç”¨
âœ… ä½¿ç”¨ key å±æ€§
âœ… åˆç†ä½¿ç”¨ computed å’Œ watch
âœ… ç”Ÿäº§ç¯å¢ƒç§»é™¤ console/debugger
âœ… CDN éƒ¨ç½²é™æ€èµ„æº
âœ… å¯ç”¨ Gzip/Brotli å‹ç¼©
âœ… é…ç½® HTTP ç¼“å­˜
âœ… ä½¿ç”¨ WebP æ ¼å¼å›¾ç‰‡
```

## ğŸš€ **ä¹ã€é«˜çº§ä¼˜åŒ–æŠ€å·§**

### 1. **Web Worker å¤„ç†å¯†é›†è®¡ç®—**
```javascript
// main.js
const worker = new Worker('./worker.js')

// å°†å¤æ‚è®¡ç®—ç§»å‡ºä¸»çº¿ç¨‹
worker.postMessage({ data: largeDataSet })
worker.onmessage = (e) => {
  result.value = e.data
}
```

### 2. **Service Worker ç¦»çº¿ç¼“å­˜**
```javascript
// ä½¿ç”¨ Workbox æˆ–è‡ªå®šä¹‰ Service Worker
import { registerSW } from 'virtual:pwa-register'

registerSW({
  onNeedRefresh() {},
  onOfflineReady() {}
})
```

### 3. **Intersection Observer æ‡’åŠ è½½**
```vue
<template>
  <div ref="target">
    <img v-if="isVisible" :src="imageUrl" />
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'

const target = ref(null)
const isVisible = ref(false)

onMounted(() => {
  const observer = new IntersectionObserver((entries) => {
    isVisible.value = entries[0].isIntersecting
  })
  observer.observe(target.value)
})
</script>
```

## ğŸ¯ **æ€»ç»“ï¼šVue æ€§èƒ½ä¼˜åŒ–é»„é‡‘æ³•åˆ™**

1. **æµ‹é‡å…ˆè¡Œ**ï¼šä¸ç”¨ Lighthouse æµ‹é‡å°±ä¸è¦ä¼˜åŒ–
2. **æŒ‰éœ€åŠ è½½**ï¼šè·¯ç”±ã€ç»„ä»¶ã€èµ„æºéƒ½è¦æ‡’åŠ è½½
3. **ç¼“å­˜ä¸€åˆ‡**ï¼šHTTPç¼“å­˜ã€å†…å­˜ç¼“å­˜ã€è®¡ç®—ç»“æœç¼“å­˜
4. **å‡å°‘æ¸²æŸ“**ï¼šåˆç†ä½¿ç”¨ `v-once`ã€`v-memo`ã€`shallowRef`
5. **åˆ†æ‰¹å¤„ç†**ï¼šå¤§æ•°æ®åˆ†æ‰¹æ¸²æŸ“ã€è¯·æ±‚åˆå¹¶
6. **GPUåŠ é€Ÿ**ï¼šåŠ¨ç”»ä½¿ç”¨ `transform` å’Œ `opacity`
7. **å·¥å…·è‡ªåŠ¨åŒ–**ï¼šæ„å»ºåˆ†æã€æ€§èƒ½ç›‘æ§é›†æˆåˆ°æµç¨‹

**è®°ä½**ï¼šä¼˜åŒ–æ˜¯æŒç»­è¿‡ç¨‹ï¼Œæ¯æ¬¡æ–°åŠŸèƒ½å¼€å‘éƒ½è¦è€ƒè™‘æ€§èƒ½å½±å“ã€‚æœ€å¥½çš„ä¼˜åŒ–æ˜¯**ä¸å†™ä½æ•ˆä»£ç **ï¼Œè€Œä¸æ˜¯äº‹åè¡¥æ•‘ã€‚