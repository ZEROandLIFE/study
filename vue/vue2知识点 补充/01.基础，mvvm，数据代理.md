# vue2 补充学习

## data返回的是一个函数而不是对象
如果 data 是对象，所有实例会共享同一个对象引用，导致一个实例修改数据会影响其他实例。还有里面必须写成普通函数的样子不能写箭头函数，不然this会指向window而不是vue
```
// 错误！多个组件实例会共享同一个 data 对象
data: {
  count: 0
}
// 正确！每个实例有独立的数据副本
data() {
  return {
    count: 0
  };
}
```
## Vue 和 MVVM 对比

| **特性**      | **MVVM**                       | **Vue**                                  |
| ------------- | ------------------------------ | ---------------------------------------- |
| **ViewModel** | 明确的中间层（如 Knockout.js） | 隐式实现（`data` + 指令 + 组件）         |
| **双向绑定**  | 通常仅表单输入（如 `v-model`） | 支持更灵活的绑定（如 `v-bind` + `v-on`） |
| **模板语法**  | 依赖特定框架（如 XAML）        | 支持 HTML 扩展（指令、插值等）           |
| **性能优化**  | 较少关注                       | 通过虚拟 DOM 和响应式系统优化性能        |

## Object.defineProperty 方法
Object.defineProperty(obj, prop, descriptor);
```
// 数据描述符：定义可修改、可枚举、可配置的属性
const obj1 = {};
Object.defineProperty(obj1, 'age', {
  value: 25,
  writable: true,//可修改
  enumerable: true,//可遍历
  configurable: true//可删除
});

// 存取描述符：实现数据劫持
const obj2 = { _data: 0 };
Object.defineProperty(obj2, 'data', {
  get() { return this._data; },
  set(value) {
    console.log(`Data changed to ${value}`);
    this._data = value;
  },
  enumerable: true
});
obj2.data = 10; // 输出：Data changed to 10
```
## 数据代理
数据代理：通过一个对象代理对另一个对象中属性的操作（读/写）
```
let obj = { x: 100 };
let obj2 = { y: 200 };

// 在 obj2 上定义属性 'x'，代理 obj.x 的读写
Object.defineProperty(obj2, 'x', {
  get() {
    return obj.x; // 读取时返回 obj.x
  },
  set(value) {
    obj.x = value; // 写入时修改 obj.x
  },
  enumerable: true, // 允许枚举
  configurable: true // 允许后续修改描述符
});

// 测试
console.log(obj2.x); // 100（通过代理读取 obj.x）
obj2.x = 300;       // 通过代理修改 obj.x
console.log(obj.x); // 300（obj.x 被修改）
```
