# Vue2 常用指令详解

## 指令概念速览

### 1. `v-text`
- **作用**：更新元素的 `textContent`，会覆盖元素原有内容  
- **与 `{{ }}` 的区别**：避免未编译时的闪现（但不如 `v-cloak` 彻底）  

### 2. `v-html`
- **作用**：更新元素的 `innerHTML`，可以渲染 HTML 标签  
- **⚠️ 注意**：存在 XSS 风险，仅用于可信内容  

### 3. `v-cloak`
- **作用**：解决模板未编译时的闪现问题  
- **配合 CSS**：`[v-cloak] { display: none }`  

### 4. `v-once`
- **作用**：一次性插值，数据变化时不会更新  
- **适用场景**：静态化数据展示  

### 5. `v-pre`
- **作用**：跳过编译，直接显示原始 `{{ }}` 标签  
- **适用场景**：需要显示 Mustache 语法的文档  

---

## 完整代码示例

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vue2 指令示例</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <style>
    [v-cloak] { display: none; }
    .box { 
      border: 1px solid #eee; 
      padding: 10px; 
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div id="app" v-cloak>
    <!-- v-text 示例 -->
    <div class="box">
      <h3>v-text 指令</h3>
      <p>原始内容会被覆盖：</p>
      <p v-text="message">这段文字会被替换</p>
    </div>

    <!-- v-html 示例 -->
    <div class="box">
      <h3>v-html 指令</h3>
      <p v-html="htmlContent"></p>
    </div>

    <!-- v-once 示例 -->
    <div class="box">
      <h3>v-once 指令</h3>
      <p v-once>初始值: {{ onceText }}</p>
      <button @click="onceText = '修改无效'">尝试修改</button>
    </div>

    <!-- v-pre 示例 -->
    <div class="box">
      <h3>v-pre 指令</h3>
      <p v-pre>这里会直接显示 {{ message }} 而不编译</p>
    </div>

    <!-- 动态演示区 -->
    <div class="box">
      <input v-model="message" placeholder="修改所有绑定数据">
      <button @click="htmlContent = '<strong>HTML 已更新！</strong>'">更新HTML</button>
    </div>
  </div>

  <script>
    new Vue({
      el: '#app',
      data: {
        message: '页面加载于 ' + new Date().toLocaleString(),
        htmlContent: '<span style="color: red">红色文字</span>',
        onceText: '我只会渲染一次'
      }
    })
  </script>
</body>
</html>
```

---

## 关键点说明

1. **`v-cloak`**  
   必须配合 CSS 使用，否则无效。示例中通过 CDN 引入 Vue，编译需要短暂时间，`v-cloak` 会在这期间隐藏元素。

2. **`v-html` 的安全性**  
   永远不要对用户输入使用 `v-html`，例如：
   ```javascript
   // 危险示例（实际开发中避免！）
   data: {
     userInput: '<script>alert("XSS")</script>'
   }
   ```

3. **性能优化提示**  
   - `v-pre` 可以减少编译开销（在大量静态文本时有用）  
   - `v-once` 可以避免不必要的响应式开销  

4. **模板语法对比**  
   ```html
   <!-- 等效写法 -->
   <span v-text="msg"></span>
   <span>{{ msg }}</span>
   ```

---

## 预期效果

1. 页面加载时不会出现 `{{ }}` 闪现（因 `v-cloak`）  
2. 修改输入框会更新所有相关位置（除 `v-once` 部分）  
3. 点击"更新HTML"按钮会渲染红色文字  
4. "尝试修改"按钮对 `v-once` 区域无效  
5. `v-pre` 区域始终显示原始 `{{ message }}`  

